<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Array of all possible color combinations
      var colors = ["W", "U", "B", "R", "G", "WU", "WB", "WR", "WG", "UB", "UR", "UG", "BR", "BG", "RG", "WUB", "WUR", "WUG", "WBR", "WBG", "WRG", "UBR", "UBG", "URG", "BRG", "WUBR", "WUBG", "WURG", "WBRG", "UBRG", "WUBRG"];

      // Generate a random color
      var color = colors[Math.floor(Math.random() * colors.length)];

      // Display the chosen color
      $("#color").text(color);
      
      //Keep track of seen cards
      var seenCards = new Set();

      // API call to Scryfall to get five random commanders of the chosen color
      var commanders = [1, 2, 3, 4, 5];
      $.each(commanders, function(i, commander) {
          $.ajax({
            url: "https://api.scryfall.com/cards/random",
            data: {
              q: "is:commander c=" + color,
            },
            success: function(card) {
              if(!seenCards.has(card.id)){
                seenCards.add(card.id);
                // Display the commander name
                $("#commander" + commander + "_name").text(card.name);
                // Display the commander image
                $("#commander" + commander).attr("src", card.image_uris.normal);
                // Display the commander link
                $("#commander" + commander).parent().attr("href", card.scryfall_uri);
              }else{
                //if card already seen, redo the loop
                i--;
              }
            }
          });
      });
    });
  </script>
</head>
<body>
  <div>
    <h1>Color: <span id="color"></span></h1>
  </div>
  <table>
    <tr>
      <td><a href="" target="_blank"><img id="commander1" src="" width="200" height="278"></a></td>
      <td><a href="" target="_blank"><img id="commander2" src="" width="200" height="278"></a></td>
      <td><a href="" target="_blank"><img id="commander3" src="" width="200" height="278"></a></td>
    </tr>
    <tr>
      <td><a href="" target="_blank"><img id="commander4" src="" width="200" height="278"></a></td>
      <td><a href="" target="_blank"><img id="commander5" src="" width="200" height="278"></a></td>
    </tr
  </table>
</body>
